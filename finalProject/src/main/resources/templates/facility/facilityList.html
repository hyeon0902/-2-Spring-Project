<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>시설리스트</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
	<section layout:fragment="content">
		<section class="breadcrumb_area blog_banner_two">
			<div class="overlay bg-parallax" data-stellar-ratio="0.8"
				data-stellar-vertical-offset="0" data-background=""
				style="transform: translateY(0px);"></div>
			<div class="container">
				<div class="page-cover text-center">
					<h2 class="page-cover-tittle f_48">봉사마루와 함께하는 시설들</h2>

				</div>
			</div>
		</section>
		<div>



		<div>
		<select id="selRegion" style="weight:100;"onchange="filterFacilities()">
			<option value="">==지역==</option>
		    <option th:each="sub : ${subZ}"  th:value="${sub.subCode}" th:text="${sub.value}" th:selected="${#strings.equals(sub.subCode, param.facZip2)}"></option>
		</select>
		
		<select id= "selFacType"  style="weight:100;"onchange="filterFacilities()">
			<option value="">==봉사유형==</option>
			<option th:each="subf : ${subF}" th:value="${subf.subCode}" th:text="${subf.value}" th:selected="${#strings.equals(subf.subCode, param.facType)}"></option>
		</select>
		</div>

			<div class="row mb_30">
				<th:block th:each="facility:${facilityList}" id="filteredFacilities">
					<div class="col-lg-4 col-md-6">
						<div class="single-recent-blog-post">
							<div class="thumb">
								<!-- <img class="img-fluid" src="../image/초록개구리.png" alt="post"> -->
								<img th:src="${facility.filePath}" alt="">
							<!-- 	 <a class="btn theme_btn button_hover" th:href="@{/facilityInfo/{facId}(facId=${facility.facId})}"></a> -->
								<a class="btn theme_btn button_hover" th:href="@{/fInfo/facilityInfo(facId=${facility.facId})}"
										th:text="${facility.facName}"></a>
							</div>
							<div class="details">
								<div class="tags">
									<!-- 								<a href="#" class="button_hover tag_btn">Travel</a> <a href="#"
									class="button_hover tag_btn">Life Style</a> -->
									
								</div>
								<h3  style="display:none" th:text="${facility.facId}"></h3>
								<h4 class="sec_h4" th:text="${facility.facName}"></h4>
								<p th:text="${facility.facAddr}"></p>
								<p style="display:none" th:text="${facility.region}" id="regions"></p>
								<h6 class="date title_color" th:text="${facility.facType}"></h6>
							</div>
						</div>
					</div>
				</th:block>
			</div>


<button type="button" th:onclick="pagingReq()"></button>

<nav class="blog-pagination justify-content-center d-flex">
				<ul class="pagination">
					<li class="page-item"><a th:href="@{/facilityList(start=${vo.start - vo.cntPerPage}, end=${vo.start - 1})}" class="page-link"
						aria-label="Previous"> <span aria-hidden="true"> <span
								class="lnr lnr-chevron-left"></span>
						</span>
					</a></li>
					
					<li class="page-item" th:each="pageNum : ${#numbers.sequence(vo.startPage, vo.endPage)}" th:class="${pageNum == vo.currentPage ? 'page-item active' : 'page-item'}">
			            <a class="page-link" th:href="@{/facilityList(start=${(pageNum - 1) * vo.cntPerPage + 1}, end=${pageNum * vo.cntPerPage})}"
			               th:text="${pageNum}"></a>
			        </li>
					
					<li class="page-item"><a th:href="@{/facilityList(start=${vo.end + 1}, end=${vo.end + vo.cntPerPage})}" class="page-link"
						aria-label="Next"> <span aria-hidden="true"> <span
								class="lnr lnr-chevron-right"></span>
						</span>
					</a></li>
				</ul>
			</nav>

		</div>

<script th:inline="javascript">
    function filterFacilities() {
    	
        let selectedRegion = $('#selRegion').val();
		let selectedFacType = $('#selFacType').val();
		location.href=`facilityList?facZip2=${selectedRegion}&facType=${selectedFacType}`
    }

  
    
    
    
    
    
    
    
    
    
	
    
    
    
    
</script>



	</section>
</body>
</html>

